{% extends 'base.html' %}
{% load static %}

{% block title %}Tiempo recorrido{% endblock %}

{% block css %}
{% with "components/gentelella/vendors/" as gentelella_static %}
  <link href="{% static gentelella_static|add:"bootstrap-daterangepicker/daterangepicker.css" %}" rel="stylesheet">
  <link href="{% static gentelella_static|add:"pnotify/dist/pnotify.css" %}" rel="stylesheet">
  <link href="{% static gentelella_static|add:"pnotify/dist/pnotify.buttons.css" %}" rel="stylesheet">
  <link href="{% static gentelella_static|add:"pnotify/dist/pnotify.nonblock.css" %}" rel="stylesheet">
  <link href="{% static gentelella_static|add:"select2/dist/css/select2.min.css" %}" rel="stylesheet">
  <style>
.select2-container .select2-choice:not(.select2-default) {
    background-image: none !important;
    background-color: #D9FFC7;
}
  </style>
{% endwith %}
{% endblock %}

{% block content %}
<div class="">
  <div class="page-title">
    <div class="title_left">
      <h3>Perfil de carga <small>por expedición</small></h3>
    </div>
    <div class="title_right">
    </div>
  </div>
  <div class="clearfix"></div>
  <br />

  <div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
        <div class="x_title">
          <h2>Filtro <small></small></h2>
          <ul class="nav navbar-right panel_toolbox">
            <li style="float:right"><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
        <div class="row">
          <div class="col-md-2 col-sm-12 col-xs-12 form-group">
            <label class="control-label" for="filterDateFrom">Desde:</label>
            <input type="text" id="filterDateFrom" placeholder="Desde" class="form-control">
          </div>

          <div class="col-md-2 col-sm-12 col-xs-12 form-group">
            <label class="control-label" for="filterDateTo">Hasta:</label>
            <input type="text" id="filterDateTo" placeholder="Hasta" class="form-control">
          </div>

          <div class="col-md-2 col-sm-12 col-xs-12 form-group">
            <label class="control-label" for="filterRoute">Servicio-sentido:</label>
            <!-- <input type="text" id="filterRoute" placeholder="Servicio sentido" class="form-control">-->
            <select class="form-control" id='filterRoute'>
              <option></option>
              {% for route in routes %}
              <option>{{ route }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="col-md-2 col-sm-12 col-xs-12 form-group">
            <label class="control-label" for="filterDayType">Tipo de día:</label>
            <select class="form-control" id='filterDayType' multiple="multiple">
              {% for dayType in dayTypes %}
              <option>{{ dayType }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="col-md-4 col-sm-12 col-xs-12 form-group">
            <label class="control-label" for="filterPeriod">Período:</label>
            <select class="form-control" id='filterPeriod' multiple="multiple">
              {% for period in periods %}
              <option>{{ period }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4 col-sm-12 col-xs-12 form-group">
            <label class="control-label" for="filterLicensePlate">Patente:</label>
            <input type="text" id="filterLicensePlate" placeholder="Patente" class="tags form-control">
          </div>

          <div class="col-md-4 col-sm-12 col-xs-12 form-group">
            <label class="control-label" for="filterLicensePlate">Expedición id:</label>
            <input type="text" id="filterExpeditionId" placeholder="Patente" class="tags form-control">
          </div>
        </div>

          <div class="col-md-12 col-sm-12 col-xs-12 form-group">
            <div class="ln_solid"></div>
            <button type="submit" id="btnUpdateChart" class="btn btn-success btn-lg btn-round">Actualizar datos</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
  <div class="col-md-9 col-sm-9 col-xs-12">
    <div class="x_panel">
      <div class="x_title">
        <h2>Perfil de carga<small>por expedición</small></h2>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <div id="main" style="height:400px;"></div>
      </div>
    </div>
  </div>
  <div class="col-md-3 col-xs-12">
   <div class="x_panel">
      <div class="x_title">
        <h2>Información de expedición</h2>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <div class="tile-stats">
          <div class="icon"><i class="fa fa-bus"></i></div>
          <div class="count" id="route"></div>
          <h3 id="licensePlate"></h3>
        </div>
        <div class="tile-stats">
          <p>Capacidad: <strong id="capacity"></strong></p>
          <p>Hora de inicio: <strong id="timeTripInit"></strong></p>
          <p>Hora de fin: <strong id="timeTripEnd"></strong></p>
        </div>
      </div>
    </div>
  </div>
  </div>

  <div class="row">
  <div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
      <div class="x_title">
        <h2>Distribuciones</small></h2>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <div id="echartDistribution" style="height:400px;"></div>
      </div>
    </div>
  </div>
  </div>
{% endblock %}

{% block js %}
{% with "components/gentelella/vendors/" as gentelella_static %}
<script src="{% static gentelella_static|add:"echarts/dist/echarts.min.js" %}"></script>
<script src="{% static gentelella_static|add:"moment/min/moment-with-locales.min.js" %}"></script>
<script src="{% static gentelella_static|add:"bootstrap-daterangepicker/daterangepicker.js" %}"></script>
<script src="{% static gentelella_static|add:"jquery.tagsinput/src/jquery.tagsinput.js" %}"></script>
<script src="{% static gentelella_static|add:"pnotify/dist/pnotify.js" %}"></script>
<script src="{% static gentelella_static|add:"pnotify/dist/pnotify.buttons.js" %}"></script>
<script src="{% static gentelella_static|add:"pnotify/dist/pnotify.nonblock.js" %}"></script>
<script src="{% static gentelella_static|add:"select2/dist/js/select2.min.js" %}"></script>
{% endwith %}
<script src="{% static "own/js/echartsTheme.js" %}"></script>
<script>
$(document).ready(function(){
    var app = echarts.init(document.getElementById('main'));

    app.title = 'TEST';

    var hours = ["00:00", "00:30", "01:00", "01:30", "02:00", "02:30", "03:00", "03:30", "04:00", "04:30", "05:00", "05:30", "06:00", "06:30", "07:00", "07:30", "08:00", "08:30", "09:00", "09:30", "10:00", "10:30", "11:00", "11:30", "12:00", "12:30", "13:00", "13:30", "14:00", "14:30", "15:00", "15:30", "16:00", "16:30", "17:00", "17:30", "18:00", "18:30", "19:00", "19:30", "20:00", "20:30", "21:00", "21:30", "22:00", "22:30", "23:00", "23:30"];
    var segments = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41];
    var vel_range = ['', ' < 15 k/h', '15-19 k/h', '19-21 k/h', '21-25 k/h', '25-30 k/h', ' > 30 k/h'];

    var data = [[0, 0, 2], [0, 1, 2], [0, 11, 6], [0, 12, 1], [0, 13, 1], [0, 14, 1], [0, 15, 1], [0, 16, 1], [0, 17, 1], [0, 18, 1], [0, 19, 1], [0, 20, 1], [0, 21, 1], [0, 22, 1], [0, 23, 1], [0, 24, 1], [0, 25, 1], [0, 26, 1], [0, 27, 1], [0, 28, 1], [0, 29, 1], [0, 30, 1], [0, 31, 1], [0, 32, 1], [0, 33, 1], [0, 34, 1], [0, 35, 1], [0, 36, 1], [0, 37, 1], [0, 38, 1], [0, 39, 1], [0, 40, 1], [0, 41, 1], [0, 42, 1], [0, 43, 1], [0, 44, 2], [0, 45, 1], [0, 46, 1], [0, 47, 1], [1, 0, 5], [1, 1, 6], [1, 11, 5], [1, 12, 5], [1, 13, 3], [1, 14, 1], [1, 15, 2], [1, 16, 2], [1, 17, 3], [1, 18, 3], [1, 19, 4], [1, 20, 2], [1, 21, 2], [1, 22, 2], [1, 23, 4], [1, 24, 2], [1, 25, 2], [1, 26, 2], [1, 27, 2], [1, 28, 2], [1, 29, 3], [1, 30, 3], [1, 31, 4], [1, 32, 2], [1, 33, 2], [1, 34, 2], [1, 35, 1], [1, 36, 1], [1, 37, 2], [1, 38, 2], [1, 39, 2], [1, 40, 4], [1, 41, 4], [1, 42, 4], [1, 43, 5], [1, 44, 4], [1, 45, 5], [1, 46, 5], [1, 47, 4], [2, 0, 5], [2, 1, 5], [2, 11, 4], [2, 12, 5], [2, 13, 3], [2, 14, 2], [2, 15, 2], [2, 16, 2], [2, 17, 2], [2, 18, 3], [2, 19, 4], [2, 20, 3], [2, 21, 4], [2, 22, 3], [2, 23, 3], [2, 24, 4], [2, 25, 2], [2, 26, 2], [2, 27, 2], [2, 28, 3], [2, 29, 3], [2, 30, 3], [2, 31, 3], [2, 32, 3], [2, 33, 2], [2, 34, 2], [2, 35, 2], [2, 36, 2], [2, 37, 2], [2, 38, 2], [2, 39, 2], [2, 40, 4], [2, 41, 4], [2, 42, 4], [2, 43, 5], [2, 44, 5], [2, 45, 5], [2, 46, 5], [2, 47, 4], [3, 0, 3], [3, 1, 4], [3, 11, 3], [3, 12, 4], [3, 13, 2], [3, 14, 1], [3, 15, 1], [3, 16, 1], [3, 17, 1], [3, 18, 1], [3, 19, 1], [3, 20, 1], [3, 21, 2], [3, 22, 2], [3, 23, 2], [3, 24, 1], [3, 25, 1], [3, 26, 1], [3, 27, 1], [3, 28, 1], [3, 29, 1], [3, 30, 1], [3, 31, 1], [3, 32, 1], [3, 33, 2], [3, 34, 1], [3, 35, 1], [3, 36, 1], [3, 37, 1], [3, 38, 1], [3, 39, 1], [3, 40, 2], [3, 41, 2], [3, 42, 2], [3, 43, 2], [3, 44, 3], [3, 45, 2], [3, 46, 4], [3, 47, 4], [4, 0, 3], [4, 1, 4], [4, 11, 2], [4, 12, 2], [4, 13, 1], [4, 14, 1], [4, 15, 1], [4, 16, 1], [4, 17, 1], [4, 18, 1], [4, 19, 1], [4, 20, 1], [4, 21, 1], [4, 22, 1], [4, 23, 2], [4, 24, 1], [4, 25, 1], [4, 26, 1], [4, 27, 1], [4, 28, 1], [4, 29, 1], [4, 30, 1], [4, 31, 1], [4, 32, 1], [4, 33, 1], [4, 34, 1], [4, 35, 1], [4, 36, 1], [4, 37, 1], [4, 38, 1], [4, 39, 1], [4, 40, 1], [4, 41, 2], [4, 42, 1], [4, 43, 2], [4, 44, 2], [4, 45, 2], [4, 46, 4], [4, 47, 4], [5, 0, 4], [5, 1, 6], [5, 11, 3], [5, 12, 2], [5, 13, 2], [5, 14, 2], [5, 15, 2], [5, 16, 2], [5, 17, 2], [5, 18, 3], [5, 19, 3], [5, 20, 3], [5, 21, 3], [5, 22, 3], [5, 23, 3], [5, 24, 4], [5, 25, 3], [5, 26, 2], [5, 27, 3], [5, 28, 4], [5, 29, 4], [5, 30, 3], [5, 31, 2], [5, 32, 3], [5, 33, 2], [5, 34, 4], [5, 35, 4], [5, 36, 2], [5, 37, 3], [5, 38, 2], [5, 39, 2], [5, 40, 4], [5, 41, 3], [5, 42, 3], [5, 43, 4], [5, 44, 4], [5, 45, 5], [5, 46, 3], [5, 47, 5], [6, 0, 6], [6, 1, 6], [6, 11, 5], [6, 12, 5], [6, 13, 5], [6, 14, 5], [6, 15, 5], [6, 16, 5], [6, 17, 5], [6, 18, 5], [6, 19, 6], [6, 20, 5], [6, 21, 5], [6, 22, 5], [6, 23, 5], [6, 24, 6], [6, 25, 5], [6, 26, 5], [6, 27, 5], [6, 28, 5], [6, 29, 5], [6, 30, 5], [6, 31, 5], [6, 32, 5], [6, 33, 5], [6, 34, 5], [6, 35, 5], [6, 36, 4], [6, 37, 5], [6, 38, 5], [6, 39, 5], [6, 40, 5], [6, 41, 5], [6, 42, 5], [6, 43, 6], [6, 44, 6], [6, 45, 6], [6, 46, 6], [6, 47, 6], [7, 0, 4], [7, 1, 4], [7, 11, 2], [7, 12, 3], [7, 13, 2], [7, 14, 1], [7, 15, 1], [7, 16, 1], [7, 17, 1], [7, 18, 1], [7, 19, 2], [7, 20, 2], [7, 21, 1], [7, 22, 1], [7, 23, 1], [7, 24, 2], [7, 25, 1], [7, 26, 1], [7, 27, 1], [7, 28, 1], [7, 29, 1], [7, 30, 1], [7, 31, 1], [7, 32, 1], [7, 33, 2], [7, 34, 1], [7, 35, 1], [7, 36, 1], [7, 37, 1], [7, 38, 1], [7, 39, 1], [7, 40, 1], [7, 41, 2], [7, 42, 1], [7, 43, 2], [7, 44, 2], [7, 45, 5], [7, 46, 2], [7, 47, 4], [8, 0, 4], [8, 1, 4], [8, 11, 4], [8, 12, 2], [8, 13, 2], [8, 14, 1], [8, 15, 1], [8, 16, 1], [8, 17, 1], [8, 18, 1], [8, 19, 2], [8, 20, 2], [8, 21, 1], [8, 22, 2], [8, 23, 1], [8, 24, 2], [8, 25, 1], [8, 26, 1], [8, 27, 2], [8, 28, 2], [8, 29, 2], [8, 30, 1], [8, 31, 1], [8, 32, 1], [8, 33, 2], [8, 34, 2], [8, 35, 1], [8, 36, 2], [8, 37, 2], [8, 38, 1], [8, 39, 2], [8, 40, 2], [8, 41, 2], [8, 42, 2], [8, 43, 3], [8, 44, 2], [8, 45, 2], [8, 46, 4], [8, 47, 3], [9, 0, 6], [9, 1, 4], [9, 2, 6], [9, 11, 6], [9, 12, 6], [9, 13, 6], [9, 14, 5], [9, 15, 5], [9, 16, 5], [9, 17, 5], [9, 18, 6], [9, 19, 6], [9, 20, 5], [9, 21, 5], [9, 22, 6], [9, 23, 5], [9, 24, 6], [9, 25, 5], [9, 26, 5], [9, 27, 5], [9, 28, 6], [9, 29, 6], [9, 30, 6], [9, 31, 5], [9, 32, 4], [9, 33, 5], [9, 34, 5], [9, 35, 5], [9, 36, 4], [9, 37, 5], [9, 38, 4], [9, 39, 3], [9, 40, 4], [9, 41, 5], [9, 42, 5], [9, 43, 6], [9, 44, 6], [9, 45, 6], [9, 46, 6], [9, 47, 6], [10, 0, 1], [10, 1, 2], [10, 2, 2], [10, 11, 2], [10, 12, 1], [10, 13, 1], [10, 14, 1], [10, 15, 1], [10, 16, 1], [10, 17, 1], [10, 18, 1], [10, 19, 1], [10, 20, 1], [10, 21, 1], [10, 22, 1], [10, 23, 1], [10, 24, 1], [10, 25, 1], [10, 26, 1], [10, 27, 1], [10, 28, 1], [10, 29, 1], [10, 30, 1], [10, 31, 1], [10, 32, 1], [10, 33, 1], [10, 34, 1], [10, 35, 1], [10, 36, 1], [10, 37, 1], [10, 38, 1], [10, 39, 1], [10, 40, 1], [10, 41, 1], [10, 42, 1], [10, 43, 1], [10, 44, 1], [10, 45, 1], [10, 46, 1], [10, 47, 1], [11, 0, 6], [11, 1, 6], [11, 11, 6], [11, 12, 5], [11, 13, 4], [11, 14, 4], [11, 15, 3], [11, 16, 4], [11, 17, 4], [11, 18, 3], [11, 19, 4], [11, 20, 4], [11, 21, 4], [11, 22, 4], [11, 23, 4], [11, 24, 4], [11, 25, 4], [11, 26, 4], [11, 27, 3], [11, 28, 3], [11, 29, 4], [11, 30, 4], [11, 31, 4], [11, 32, 4], [11, 33, 4], [11, 34, 4], [11, 35, 4], [11, 36, 4], [11, 37, 3], [11, 38, 3], [11, 39, 3], [11, 40, 4], [11, 41, 3], [11, 42, 4], [11, 43, 5], [11, 44, 5], [11, 45, 4], [11, 46, 5], [11, 47, 5], [12, 0, 6], [12, 1, 6], [12, 11, 6], [12, 12, 6], [12, 13, 6], [12, 14, 6], [12, 15, 5], [12, 16, 6], [12, 17, 6], [12, 18, 5], [12, 19, 6], [12, 20, 5], [12, 21, 6], [12, 22, 6], [12, 23, 6], [12, 24, 6], [12, 25, 6], [12, 26, 6], [12, 27, 6], [12, 28, 6], [12, 29, 6], [12, 30, 6], [12, 31, 6], [12, 32, 5], [12, 33, 6], [12, 34, 6], [12, 35, 6], [12, 36, 6], [12, 37, 6], [12, 38, 6], [12, 39, 6], [12, 40, 6], [12, 41, 6], [12, 42, 6], [12, 43, 6], [12, 44, 6], [12, 45, 6], [12, 46, 6], [12, 47, 6], [13, 0, 6], [13, 1, 6], [13, 11, 6], [13, 12, 6], [13, 13, 4], [13, 14, 2], [13, 15, 2], [13, 16, 3], [13, 17, 3], [13, 18, 4], [13, 19, 4], [13, 20, 4], [13, 21, 3], [13, 22, 5], [13, 23, 2], [13, 24, 3], [13, 25, 3], [13, 26, 3], [13, 27, 2], [13, 28, 2], [13, 29, 4], [13, 30, 3], [13, 31, 3], [13, 32, 3], [13, 33, 3], [13, 34, 5], [13, 35, 2], [13, 36, 3], [13, 37, 4], [13, 38, 3], [13, 39, 2], [13, 40, 4], [13, 41, 5], [13, 42, 4], [13, 43, 5], [13, 44, 4], [13, 45, 5], [13, 46, 4], [13, 47, 6], [14, 0, 6], [14, 1, 6], [14, 11, 6], [14, 12, 5], [14, 13, 5], [14, 14, 4], [14, 15, 4], [14, 16, 4], [14, 17, 4], [14, 18, 3], [14, 19, 5], [14, 20, 4], [14, 21, 4], [14, 22, 5], [14, 23, 5], [14, 24, 4], [14, 25, 3], [14, 26, 4], [14, 27, 4], [14, 28, 4], [14, 29, 4], [14, 30, 3], [14, 31, 3], [14, 32, 3], [14, 33, 5], [14, 34, 3], [14, 35, 3], [14, 36, 4], [14, 37, 4], [14, 38, 4], [14, 39, 4], [14, 40, 4], [14, 41, 4], [14, 42, 4], [14, 43, 4], [14, 44, 4], [14, 45, 5], [14, 46, 5], [14, 47, 6], [15, 0, 6], [15, 1, 6], [15, 11, 3], [15, 12, 5], [15, 13, 5], [15, 14, 4], [15, 15, 4], [15, 16, 4], [15, 17, 3], [15, 18, 4], [15, 19, 4], [15, 20, 4], [15, 21, 4], [15, 22, 4], [15, 23, 3], [15, 24, 4], [15, 25, 4], [15, 26, 4], [15, 27, 2], [15, 28, 4], [15, 29, 4], [15, 30, 3], [15, 31, 3], [15, 32, 3], [15, 33, 4], [15, 34, 3], [15, 35, 3], [15, 36, 3], [15, 37, 3], [15, 38, 2], [15, 39, 1], [15, 40, 2], [15, 41, 4], [15, 42, 3], [15, 43, 5], [15, 44, 4], [15, 45, 4], [15, 46, 4], [15, 47, 5], [16, 0, 5], [16, 1, 4], [16, 11, 2], [16, 12, 4], [16, 13, 4], [16, 14, 4], [16, 15, 2], [16, 16, 2], [16, 17, 4], [16, 18, 5], [16, 19, 4], [16, 20, 4], [16, 21, 2], [16, 22, 3], [16, 23, 2], [16, 24, 3], [16, 25, 4], [16, 26, 2], [16, 27, 2], [16, 28, 2], [16, 29, 4], [16, 30, 2], [16, 31, 2], [16, 32, 3], [16, 33, 3], [16, 34, 2], [16, 35, 2], [16, 36, 2], [16, 37, 2], [16, 38, 2], [16, 39, 2], [16, 40, 2], [16, 41, 2], [16, 42, 3], [16, 43, 5], [16, 44, 2], [16, 45, 5], [16, 46, 5], [16, 47, 5], [17, 0, 6], [17, 1, 5], [17, 11, 3], [17, 12, 4], [17, 13, 4], [17, 14, 2], [17, 15, 2], [17, 16, 4], [17, 17, 4], [17, 18, 5], [17, 19, 5], [17, 20, 4], [17, 21, 4], [17, 22, 4], [17, 23, 3], [17, 24, 3], [17, 25, 4], [17, 26, 3], [17, 27, 3], [17, 28, 3], [17, 29, 3], [17, 30, 3], [17, 31, 3], [17, 32, 2], [17, 33, 3], [17, 34, 2], [17, 35, 2], [17, 36, 2], [17, 37, 2], [17, 38, 1], [17, 39, 1], [17, 40, 2], [17, 41, 3], [17, 42, 3], [17, 43, 4], [17, 44, 3], [17, 45, 3], [17, 46, 4], [17, 47, 4], [18, 0, 6], [18, 1, 6], [18, 12, 5], [18, 13, 4], [18, 14, 3], [18, 15, 2], [18, 16, 4], [18, 17, 3], [18, 18, 4], [18, 19, 4], [18, 20, 4], [18, 21, 3], [18, 22, 4], [18, 23, 4], [18, 24, 3], [18, 25, 4], [18, 26, 3], [18, 27, 3], [18, 28, 3], [18, 29, 4], [18, 30, 4], [18, 31, 3], [18, 32, 3], [18, 33, 4], [18, 34, 3], [18, 35, 3], [18, 36, 3], [18, 37, 3], [18, 38, 2], [18, 39, 4], [18, 40, 4], [18, 41, 5], [18, 42, 4], [18, 43, 4], [18, 44, 4], [18, 45, 5], [18, 46, 4], [18, 47, 4], [19, 0, 3], [19, 1, 6], [19, 12, 4], [19, 13, 1], [19, 14, 2], [19, 15, 1], [19, 16, 1], [19, 17, 2], [19, 18, 3], [19, 19, 2], [19, 20, 2], [19, 21, 2], [19, 22, 2], [19, 23, 1], [19, 24, 1], [19, 25, 1], [19, 26, 1], [19, 27, 1], [19, 28, 1], [19, 29, 1], [19, 30, 1], [19, 31, 1], [19, 32, 1], [19, 33, 1], [19, 34, 1], [19, 35, 1], [19, 36, 1], [19, 37, 1], [19, 38, 1], [19, 39, 1], [19, 40, 1], [19, 41, 2], [19, 42, 1], [19, 43, 2], [19, 44, 2], [19, 45, 2], [19, 46, 1], [19, 47, 5], [20, 0, 6], [20, 1, 6], [20, 12, 5], [20, 13, 5], [20, 14, 5], [20, 15, 3], [20, 16, 5], [20, 17, 4], [20, 18, 5], [20, 19, 5], [20, 20, 5], [20, 21, 5], [20, 22, 5], [20, 23, 3], [20, 24, 4], [20, 25, 5], [20, 26, 3], [20, 27, 3], [20, 28, 3], [20, 29, 4], [20, 30, 4], [20, 31, 4], [20, 32, 3], [20, 33, 4], [20, 34, 4], [20, 35, 4], [20, 36, 2], [20, 37, 2], [20, 38, 2], [20, 39, 3], [20, 40, 3], [20, 41, 4], [20, 42, 3], [20, 43, 5], [20, 44, 4], [20, 45, 4], [20, 46, 4], [20, 47, 6], [21, 0, 6], [21, 1, 5], [21, 12, 4], [21, 13, 4], [21, 14, 3], [21, 15, 2], [21, 16, 3], [21, 17, 4], [21, 18, 4], [21, 19, 4], [21, 20, 4], [21, 21, 4], [21, 22, 4], [21, 23, 5], [21, 24, 3], [21, 25, 3], [21, 26, 3], [21, 27, 2], [21, 28, 3], [21, 29, 4], [21, 30, 3], [21, 31, 3], [21, 32, 4], [21, 33, 2], [21, 34, 2], [21, 35, 2], [21, 36, 2], [21, 37, 2], [21, 38, 2], [21, 39, 2], [21, 40, 3], [21, 41, 4], [21, 42, 2], [21, 43, 4], [21, 44, 4], [21, 45, 5], [21, 46, 4], [21, 47, 5], [22, 0, 4], [22, 1, 2], [22, 12, 2], [22, 13, 2], [22, 14, 1], [22, 15, 1], [22, 16, 1], [22, 17, 1], [22, 18, 1], [22, 19, 1], [22, 20, 1], [22, 21, 1], [22, 22, 2], [22, 23, 1], [22, 24, 1], [22, 25, 1], [22, 26, 1], [22, 27, 1], [22, 28, 1], [22, 29, 1], [22, 30, 1], [22, 31, 1], [22, 32, 1], [22, 33, 1], [22, 34, 1], [22, 35, 1], [22, 36, 1], [22, 37, 1], [22, 38, 1], [22, 39, 1], [22, 40, 1], [22, 41, 1], [22, 42, 1], [22, 43, 1], [22, 44, 1], [22, 45, 1], [22, 46, 2], [22, 47, 2], [23, 0, 5], [23, 1, 4], [23, 12, 4], [23, 13, 2], [23, 14, 2], [23, 15, 2], [23, 16, 2], [23, 17, 2], [23, 18, 3], [23, 19, 3], [23, 20, 3], [23, 21, 4], [23, 22, 4], [23, 23, 3], [23, 24, 4], [23, 25, 3], [23, 26, 3], [23, 27, 2], [23, 28, 2], [23, 29, 2], [23, 30, 3], [23, 31, 3], [23, 32, 2], [23, 33, 3], [23, 34, 2], [23, 35, 2], [23, 36, 2], [23, 37, 2], [23, 38, 2], [23, 39, 2], [23, 40, 2], [23, 41, 3], [23, 42, 3], [23, 43, 3], [23, 44, 4], [23, 45, 2], [23, 46, 4], [23, 47, 4], [24, 0, 6], [24, 1, 5], [24, 12, 6], [24, 13, 5], [24, 14, 4], [24, 15, 4], [24, 16, 5], [24, 17, 5], [24, 18, 5], [24, 19, 6], [24, 20, 5], [24, 21, 5], [24, 22, 5], [24, 23, 5], [24, 24, 5], [24, 25, 4], [24, 26, 4], [24, 27, 2], [24, 28, 5], [24, 29, 5], [24, 30, 4], [24, 31, 5], [24, 32, 4], [24, 33, 5], [24, 34, 5], [24, 35, 4], [24, 36, 4], [24, 37, 1], [24, 38, 5], [24, 39, 4], [24, 40, 5], [24, 41, 5], [24, 42, 5], [24, 43, 5], [24, 44, 5], [24, 45, 5], [24, 46, 5], [24, 47, 6], [25, 0, 5], [25, 1, 4], [25, 12, 5], [25, 13, 3], [25, 14, 1], [25, 15, 1], [25, 16, 1], [25, 17, 1], [25, 18, 1], [25, 19, 1], [25, 20, 1], [25, 21, 1], [25, 22, 1], [25, 23, 1], [25, 24, 1], [25, 25, 1], [25, 26, 1], [25, 27, 1], [25, 28, 1], [25, 29, 2], [25, 30, 1], [25, 31, 1], [25, 32, 2], [25, 33, 1], [25, 34, 1], [25, 35, 1], [25, 36, 1], [25, 37, 1], [25, 38, 1], [25, 39, 1], [25, 40, 1], [25, 41, 1], [25, 42, 2], [25, 43, 2], [25, 44, 3], [25, 45, 3], [25, 46, 3], [25, 47, 4], [26, 0, 4], [26, 1, 2], [26, 12, 2], [26, 13, 2], [26, 14, 2], [26, 15, 1], [26, 16, 1], [26, 17, 1], [26, 18, 1], [26, 19, 1], [26, 20, 2], [26, 21, 1], [26, 22, 1], [26, 23, 1], [26, 24, 1], [26, 25, 1], [26, 26, 1], [26, 27, 1], [26, 28, 1], [26, 29, 2], [26, 30, 1], [26, 31, 1], [26, 32, 1], [26, 33, 1], [26, 34, 1], [26, 35, 1], [26, 36, 1], [26, 37, 1], [26, 38, 1], [26, 39, 1], [26, 40, 1], [26, 41, 1], [26, 42, 2], [26, 43, 2], [26, 44, 2], [26, 45, 2], [26, 46, 2], [26, 47, 2], [27, 0, 6], [27, 1, 6], [27, 12, 6], [27, 13, 6], [27, 14, 6], [27, 15, 6], [27, 16, 5], [27, 17, 5], [27, 18, 5], [27, 19, 6], [27, 20, 6], [27, 21, 5], [27, 22, 5], [27, 23, 5], [27, 24, 5], [27, 25, 6], [27, 26, 5], [27, 27, 6], [27, 28, 5], [27, 29, 5], [27, 30, 6], [27, 31, 4], [27, 32, 5], [27, 33, 5], [27, 34, 5], [27, 35, 4], [27, 36, 4], [27, 37, 4], [27, 38, 4], [27, 39, 5], [27, 40, 4], [27, 41, 6], [27, 42, 5], [27, 43, 5], [27, 44, 6], [27, 45, 5], [27, 46, 6], [27, 47, 6], [28, 0, 6], [28, 1, 6], [28, 12, 6], [28, 13, 4], [28, 14, 4], [28, 15, 3], [28, 16, 4], [28, 17, 2], [28, 18, 4], [28, 19, 4], [28, 20, 3], [28, 21, 4], [28, 22, 5], [28, 23, 5], [28, 24, 1], [28, 25, 5], [28, 26, 3], [28, 27, 4], [28, 28, 4], [28, 29, 4], [28, 30, 2], [28, 31, 3], [28, 32, 2], [28, 33, 3], [28, 34, 2], [28, 35, 2], [28, 36, 4], [28, 37, 2], [28, 38, 2], [28, 39, 2], [28, 40, 2], [28, 41, 4], [28, 42, 4], [28, 43, 4], [28, 44, 5], [28, 45, 3], [28, 46, 5], [28, 47, 6], [29, 0, 6], [29, 1, 6], [29, 12, 5], [29, 13, 5], [29, 14, 5], [29, 15, 4], [29, 16, 5], [29, 17, 5], [29, 18, 5], [29, 19, 5], [29, 20, 5], [29, 21, 6], [29, 22, 6], [29, 23, 5], [29, 24, 5], [29, 25, 6], [29, 26, 5], [29, 27, 5], [29, 28, 5], [29, 29, 5], [29, 30, 5], [29, 31, 5], [29, 32, 5], [29, 33, 5], [29, 34, 5], [29, 35, 5], [29, 36, 5], [29, 37, 5], [29, 38, 5], [29, 39, 6], [29, 40, 5], [29, 41, 6], [29, 42, 5], [29, 43, 6], [29, 44, 6], [29, 45, 5], [29, 46, 6], [29, 47, 6], [30, 0, 5], [30, 1, 4], [30, 12, 1], [30, 13, 1], [30, 14, 1], [30, 15, 1], [30, 16, 1], [30, 17, 1], [30, 18, 1], [30, 19, 1], [30, 20, 1], [30, 21, 1], [30, 22, 1], [30, 23, 1], [30, 24, 1], [30, 25, 1], [30, 26, 1], [30, 27, 1], [30, 28, 1], [30, 29, 1], [30, 30, 1], [30, 31, 1], [30, 32, 1], [30, 33, 1], [30, 34, 1], [30, 35, 1], [30, 36, 1], [30, 37, 1], [30, 38, 1], [30, 39, 1], [30, 40, 1], [30, 41, 1], [30, 42, 1], [30, 43, 1], [30, 44, 2], [30, 45, 2], [30, 46, 1], [30, 47, 2], [31, 0, 6], [31, 1, 5], [31, 12, 5], [31, 13, 3], [31, 14, 3], [31, 15, 2], [31, 16, 2], [31, 17, 2], [31, 18, 4], [31, 19, 4], [31, 20, 4], [31, 21, 4], [31, 22, 3], [31, 23, 4], [31, 24, 4], [31, 25, 4], [31, 26, 5], [31, 27, 5], [31, 28, 4], [31, 29, 5], [31, 30, 4], [31, 31, 4], [31, 32, 3], [31, 33, 3], [31, 34, 2], [31, 35, 1], [31, 36, 1], [31, 37, 2], [31, 38, 2], [31, 39, 4], [31, 40, 2], [31, 41, 5], [31, 42, 5], [31, 43, 5], [31, 44, 5], [31, 45, 5], [31, 46, 5], [31, 47, 4], [32, 0, 6], [32, 1, 6], [32, 12, 4], [32, 13, 4], [32, 14, 4], [32, 15, 2], [32, 16, 3], [32, 17, 3], [32, 18, 4], [32, 19, 4], [32, 20, 4], [32, 21, 5], [32, 22, 5], [32, 23, 4], [32, 24, 3], [32, 25, 5], [32, 26, 5], [32, 27, 5], [32, 28, 5], [32, 29, 5], [32, 30, 5], [32, 31, 4], [32, 32, 4], [32, 33, 5], [32, 34, 4], [32, 35, 1], [32, 36, 1], [32, 37, 2], [32, 38, 2], [32, 39, 5], [32, 40, 5], [32, 41, 5], [32, 42, 5], [32, 43, 5], [32, 44, 6], [32, 45, 5], [32, 46, 6], [32, 47, 5], [33, 0, 6], [33, 1, 6], [33, 12, 5], [33, 13, 4], [33, 14, 4], [33, 15, 2], [33, 16, 2], [33, 17, 2], [33, 18, 4], [33, 19, 4], [33, 20, 4], [33, 21, 3], [33, 22, 3], [33, 23, 4], [33, 24, 3], [33, 25, 2], [33, 26, 4], [33, 27, 4], [33, 28, 4], [33, 29, 4], [33, 30, 4], [33, 31, 4], [33, 32, 3], [33, 33, 4], [33, 34, 4], [33, 35, 1], [33, 36, 1], [33, 37, 1], [33, 38, 2], [33, 39, 4], [33, 40, 4], [33, 41, 4], [33, 42, 4], [33, 43, 5], [33, 44, 5], [33, 45, 4], [33, 46, 4], [33, 47, 5], [34, 0, 6], [34, 1, 5], [34, 12, 5], [34, 13, 4], [34, 14, 2], [34, 15, 1], [34, 16, 1], [34, 17, 3], [34, 18, 4], [34, 19, 5], [34, 20, 4], [34, 21, 4], [34, 22, 4], [34, 23, 4], [34, 24, 4], [34, 25, 4], [34, 26, 4], [34, 27, 4], [34, 28, 4], [34, 29, 4], [34, 30, 3], [34, 31, 4], [34, 32, 4], [34, 33, 3], [34, 34, 3], [34, 35, 3], [34, 36, 2], [34, 37, 2], [34, 38, 2], [34, 39, 2], [34, 40, 4], [34, 41, 4], [34, 42, 4], [34, 43, 4], [34, 44, 5], [34, 45, 4], [34, 46, 5], [34, 47, 5], [35, 0, 6], [35, 1, 5], [35, 12, 5], [35, 13, 4], [35, 14, 4], [35, 15, 4], [35, 16, 3], [35, 17, 2], [35, 18, 3], [35, 19, 4], [35, 20, 4], [35, 21, 5], [35, 22, 4], [35, 23, 3], [35, 24, 3], [35, 25, 4], [35, 26, 4], [35, 27, 4], [35, 28, 3], [35, 29, 4], [35, 30, 3], [35, 31, 3], [35, 32, 3], [35, 33, 3], [35, 34, 4], [35, 35, 4], [35, 36, 4], [35, 37, 2], [35, 38, 3], [35, 39, 3], [35, 40, 4], [35, 41, 3], [35, 42, 4], [35, 43, 4], [35, 44, 5], [35, 45, 4], [35, 46, 6], [35, 47, 5], [36, 0, 6], [36, 1, 5], [36, 12, 5], [36, 13, 3], [36, 14, 4], [36, 15, 2], [36, 16, 3], [36, 17, 3], [36, 18, 4], [36, 19, 4], [36, 20, 5], [36, 21, 4], [36, 22, 5], [36, 23, 4], [36, 24, 5], [36, 25, 4], [36, 26, 4], [36, 27, 3], [36, 28, 4], [36, 29, 4], [36, 30, 4], [36, 31, 4], [36, 32, 4], [36, 33, 4], [36, 34, 4], [36, 35, 5], [36, 36, 4], [36, 37, 4], [36, 38, 4], [36, 39, 4], [36, 40, 3], [36, 41, 5], [36, 42, 5], [36, 43, 4], [36, 44, 6], [36, 45, 5], [36, 46, 6], [36, 47, 5], [37, 0, 6], [37, 1, 6], [37, 12, 6], [37, 13, 6], [37, 14, 5], [37, 15, 6], [37, 16, 6], [37, 17, 6], [37, 18, 6], [37, 19, 6], [37, 20, 6], [37, 21, 6], [37, 22, 6], [37, 23, 6], [37, 24, 6], [37, 25, 6], [37, 26, 6], [37, 27, 6], [37, 28, 6], [37, 29, 6], [37, 30, 5], [37, 31, 6], [37, 32, 6], [37, 33, 6], [37, 34, 6], [37, 35, 5], [37, 36, 6], [37, 37, 4], [37, 38, 4], [37, 39, 5], [37, 40, 5], [37, 41, 6], [37, 42, 6], [37, 43, 6], [37, 44, 6], [37, 45, 6], [37, 46, 6], [37, 47, 6], [38, 0, 6], [38, 1, 6], [38, 12, 6], [38, 13, 6], [38, 14, 6], [38, 15, 6], [38, 16, 6], [38, 17, 6], [38, 18, 6], [38, 19, 6], [38, 20, 6], [38, 21, 6], [38, 22, 6], [38, 23, 6], [38, 24, 6], [38, 25, 6], [38, 26, 6], [38, 27, 6], [38, 28, 6], [38, 29, 6], [38, 30, 6], [38, 31, 6], [38, 32, 6], [38, 33, 6], [38, 34, 5], [38, 35, 5], [38, 36, 6], [38, 37, 5], [38, 38, 5], [38, 39, 5], [38, 40, 5], [38, 41, 6], [38, 42, 6], [38, 43, 6], [38, 44, 6], [38, 45, 5], [38, 46, 6], [38, 47, 6], [39, 0, 6], [39, 1, 6], [39, 12, 6], [39, 13, 6], [39, 14, 6], [39, 15, 6], [39, 16, 6], [39, 17, 6], [39, 18, 6], [39, 19, 6], [39, 20, 6], [39, 21, 6], [39, 22, 5], [39, 23, 5], [39, 24, 5], [39, 25, 5], [39, 26, 6], [39, 27, 5], [39, 28, 5], [39, 29, 6], [39, 30, 6], [39, 31, 6], [39, 32, 6], [39, 33, 6], [39, 34, 5], [39, 35, 5], [39, 36, 5], [39, 37, 4], [39, 38, 5], [39, 39, 5], [39, 40, 5], [39, 41, 6], [39, 42, 6], [39, 43, 6], [39, 44, 6], [39, 45, 5], [39, 46, 6], [39, 47, 6], [40, 0, 2], [40, 1, 6], [40, 12, 2], [40, 13, 2], [40, 14, 5], [40, 15, 5], [40, 16, 5], [40, 17, 6], [40, 18, 4], [40, 19, 4], [40, 20, 5], [40, 21, 3], [40, 22, 4], [40, 23, 5], [40, 24, 2], [40, 25, 2], [40, 26, 6], [40, 27, 4], [40, 28, 2], [40, 29, 5], [40, 30, 4], [40, 31, 6], [40, 32, 4], [40, 33, 4], [40, 34, 2], [40, 35, 5], [40, 36, 2], [40, 37, 3], [40, 38, 1], [40, 39, 4], [40, 40, 3], [40, 41, 5], [40, 42, 5], [40, 43, 2], [40, 44, 4], [40, 45, 2], [40, 46, 2], [40, 47, 4]];

    data = data.map(function (item) {
        return [item[1], item[0], item[2] || '-'];
    });

    option = {
        tooltip: {
            position: 'top',
            formatter: function(obj){
                return 'Horario: entre '+hours[obj.data[0]]+' y '+hours[(obj.data[0]+1)%hours.length]+'<br/>'+'Segmento: '+segments[obj.data[1]]+'<br/>'+'Velocidad: '+vel_range[obj.data[2]];
            }
        },
        animation: false,
        grid: {
            x: '5%',
            y: '5%',
            width: '70%',
            height: '80%'
        },
        xAxis: {
            type: 'category',
            data: hours,
            splitArea: {
                show: true
            },
            axisLabel: {
                rotate: 90,
                interval: 1
            }
        },
        yAxis: {
            type: 'category',
            data: segments,
            splitArea: {
                show: true
            }
        },
        visualMap: {
            min: 1,
            max: 6,
            type: 'piecewise',
            calculable: true,
            orient: 'vertical',
            right: '5%',
            top: 'center',
            pieces: [
                {min: 5.5, label: vel_range[6]},
                {min: 4.5, max: 5.5, label: vel_range[5]},
                {min: 3.5, max: 4.5, label: vel_range[4]},
                {min: 2.5, max: 3.5, label: vel_range[3]},
                {min: 1.5, max: 2.5, label: vel_range[2]},
                {max: 1.5, label: vel_range[1]},
            ],
            inRange: {
                color: ['#ff0000', '#ff7f00', '#ffff00', '#00ff00', '#007f00', '#0000ff']
            }
        },
        series: [{
            name: 'Velocidad',
            type: 'heatmap',
            data: data,
            label: {
                normal: {
                    show: false
                }
            },
            itemStyle: {
                emphasis: {
                    shadowBlur: 10,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            }
        }],
        toolbox: {
            show : true,
            feature : {
                mark : {show: false},
                restore : {show: false, title: "restaurar"},
                saveAsImage : {show: true, title: "Guardar imagen"}
            }
        }
    };

    app.setOption(option);
});
</script>
{% endblock %}
